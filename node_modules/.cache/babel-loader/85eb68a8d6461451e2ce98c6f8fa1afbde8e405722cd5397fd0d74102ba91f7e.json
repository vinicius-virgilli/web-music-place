{"ast":null,"code":"var _jsxFileName = \"/home/vinicius/Trybe/web-music-place/src/pages/Album.js\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Header from '../componentes/Header';\nimport Loading from './Loading';\nimport MusicCard from '../componentes/MusicCard';\nimport { getUser } from '../services/userAPI';\nimport { addSong, removeSong, getFavoriteSongs } from '../services/favoriteSongsAPI';\nimport getMusics from '../services/musicsAPI';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass Album extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      loading: false,\n      userName: '',\n      albumInfo: [],\n      favoriteSongs: []\n    };\n    this.test = this.test.bind(this);\n    this.madeMusicCard = this.madeMusicCard.bind(this);\n    this.onAddOrRemoveSong = this.onAddOrRemoveSong.bind(this);\n  }\n  async componentDidMount() {\n    const {\n      match: {\n        params: {\n          id\n        }\n      }\n    } = this.props;\n    this.test();\n    const albumInfo = await getMusics(id);\n    const musics = albumInfo.slice(1);\n    this.setState({\n      albumInfo: albumInfo[0],\n      musics\n    });\n  }\n  async onAddOrRemoveSong(object) {\n    this.setState({\n      loading: true\n    });\n    let {\n      favoriteSongs\n    } = this.state;\n    const {\n      trackName\n    } = object;\n    if (favoriteSongs.some(song => song.trackName === trackName)) {\n      await removeSong(object);\n    } else {\n      await addSong(object);\n    }\n    favoriteSongs = await getFavoriteSongs();\n    this.setState({\n      loading: false,\n      favoriteSongs\n    });\n  }\n  madeMusicCard(music) {\n    const {\n      collectionId\n    } = music;\n    const {\n      favoriteSongs\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"li\", {\n      children: /*#__PURE__*/_jsxDEV(MusicCard, {\n        ...music,\n        onAddOrRemoveSong: this.onAddOrRemoveSong,\n        favoriteSongs: favoriteSongs\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this)\n    }, collectionId, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this);\n  }\n  async test() {\n    this.setState({\n      loading: true\n    });\n    const retorno = await getUser();\n    const userName = retorno.name;\n    const favoriteSongs = await getFavoriteSongs();\n    this.setState({\n      userName,\n      loading: false,\n      favoriteSongs\n    });\n  }\n  render() {\n    const {\n      loading,\n      userName,\n      albumInfo,\n      musics\n    } = this.state;\n    const {\n      artistName,\n      collectionName\n    } = albumInfo;\n    let list;\n    if (musics) {\n      list = musics.map(music => this.madeMusicCard(music));\n    } else {\n      list = '';\n    }\n    const exibir = loading ? /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      \"data-testid\": \"page-album\",\n      children: [/*#__PURE__*/_jsxDEV(Header, {\n        userName: userName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        \"data-testid\": \"artist-name\",\n        children: artistName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        \"data-testid\": \"album-name\",\n        children: collectionName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this), list]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this);\n    return exibir;\n  }\n}\nAlbum.propTypes = {\n  match: PropTypes.string.isRequired,\n  id: PropTypes.string.isRequired\n};\nexport default Album;","map":{"version":3,"names":["React","PropTypes","Header","Loading","MusicCard","getUser","addSong","removeSong","getFavoriteSongs","getMusics","jsxDEV","_jsxDEV","Album","Component","constructor","state","loading","userName","albumInfo","favoriteSongs","test","bind","madeMusicCard","onAddOrRemoveSong","componentDidMount","match","params","id","props","musics","slice","setState","object","trackName","some","song","music","collectionId","children","fileName","_jsxFileName","lineNumber","columnNumber","retorno","name","render","artistName","collectionName","list","map","exibir","propTypes","string","isRequired"],"sources":["/home/vinicius/Trybe/web-music-place/src/pages/Album.js"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport Header from '../componentes/Header';\nimport Loading from './Loading';\nimport MusicCard from '../componentes/MusicCard';\nimport { getUser } from '../services/userAPI';\nimport { addSong, removeSong, getFavoriteSongs } from '../services/favoriteSongsAPI';\nimport getMusics from '../services/musicsAPI';\n\nclass Album extends React.Component {\n  constructor() {\n    super();\n\n    this.state = {\n      loading: false,\n      userName: '',\n      albumInfo: [],\n      favoriteSongs: [],\n    };\n\n    this.test = this.test.bind(this);\n    this.madeMusicCard = this.madeMusicCard.bind(this);\n    this.onAddOrRemoveSong = this.onAddOrRemoveSong.bind(this);\n  }\n\n  async componentDidMount() {\n    const { match: { params: { id } } } = this.props;\n    this.test();\n    const albumInfo = await getMusics(id);\n    const musics = albumInfo.slice(1);\n    this.setState({\n      albumInfo: albumInfo[0],\n      musics,\n    });\n  }\n\n  async onAddOrRemoveSong(object) {\n    this.setState({ loading: true });\n    let { favoriteSongs } = this.state;\n    const { trackName } = object;\n    if (favoriteSongs.some((song) => song.trackName === trackName)) {\n      await removeSong(object);\n    } else {\n      await addSong(object);\n    }\n    favoriteSongs = await getFavoriteSongs();\n    this.setState({\n      loading: false,\n      favoriteSongs,\n    });\n  }\n\n  madeMusicCard(music) {\n    const { collectionId } = music;\n    const { favoriteSongs } = this.state;\n    return (\n      <li key={ collectionId }>\n        <MusicCard\n          { ...music }\n          onAddOrRemoveSong={ this.onAddOrRemoveSong }\n          favoriteSongs={ favoriteSongs }\n        />\n      </li>\n    );\n  }\n\n  async test() {\n    this.setState({ loading: true });\n    const retorno = await getUser();\n    const userName = retorno.name;\n    const favoriteSongs = await getFavoriteSongs();\n    this.setState({\n      userName,\n      loading: false,\n      favoriteSongs,\n    });\n  }\n\n  render() {\n    const { loading, userName, albumInfo, musics } = this.state;\n    const { artistName, collectionName } = albumInfo;\n    let list;\n    if (musics) {\n      list = musics.map((music) => this.madeMusicCard(music));\n    } else {\n      list = '';\n    }\n\n    const exibir = (loading) ? (\n      <Loading />\n    ) : (\n      <div data-testid=\"page-album\">\n        <Header userName={ userName } />\n        <h3 data-testid=\"artist-name\">{artistName}</h3>\n        <h3 data-testid=\"album-name\">{collectionName}</h3>\n        {list}\n      </div>\n    );\n    return exibir;\n  }\n}\n\nAlbum.propTypes = {\n  match: PropTypes.string.isRequired,\n  id: PropTypes.string.isRequired,\n};\nexport default Album;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}